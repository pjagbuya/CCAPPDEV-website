<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">



  <link rel="stylesheet" href="../../css/chatbox-styles.css">
  <link rel="stylesheet" href="../../css/navbar-styles.css">
  <link rel="stylesheet" href="../../css/reserve-user-styles.css">
  <link rel="stylesheet" href="../../css/LT-user-reserve-student-details-styles.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Montserrat:wght@400;700;900&family=Pacifico&family=Ubuntu+Condensed&family=Ubuntu:wght@300;400&display=swap" rel="stylesheet">


  <!--Bootstrap help Section -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">


  <title>Reservation Set</title>
</head>


<body>

  <!--Navigation Bar-->



          <nav class="index-navbar navbar navbar-expand-lg bg-body-tertiary fixed-top">

            <button id="toggleSidebar" class="btn  btn-outline-secondary toggle-sidebar-custom1 toggle-sidebar-btn">
              <i class="fa-solid fa-bars fa-3x"></i>
            </button>

            <i class="custom-color1 animo-icon fa-solid fa-calendar-days fa-4x"></i>

            <div class="animo-text">
              <a href="index.html" class ="no-decor" target="_self">
              <span class="navbar-text header-custom2">
                <div class="custom-color2">
                  AnimoLab
                </div>
              </span>
              </a>
            </div>


            <!--Search Bar-->
            <div class="search-section container-fluid search_bar d-flex justify-content-center">
              <form class="d-flex" role="search">
                <input class="search-bar-input form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-light" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>

                <div class="mx-2 dropdown">
                  <button class="btn btn-outline-light dropdown-toggle" type="button" id="browseDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Browse
                  </button>
                  <div class="dropdown-menu dropdown-browse-section" aria-labelledby="browseDropdown">
                    <a href="../search-user/search-results-LT.html" target="_self">
                      <button class="dropdown-item" type="button">Browse Users</button>
                    </a>
                    <a href="../reserve-user/reserve-user-search-lab-LT.html" target="_self">
                      <button class="dropdown-item" type="button">Browse Labs</button>
                    </a>


                  </div>
                </div>
              </form>
            </div>

            <div class="profile-section">

              <!--Hardcoded name1-->
              <div class="profile-section-text">
                Flint R. Lockwood
              </div>
              <div class="pic-and-mail">
                <img class="profile-section-pic" src="https://t4.ftcdn.net/jpg/00/64/67/27/360_F_64672736_U5kpdGs9keUll8CRQ3p3YaEv2M6qkVY5.jpg" alt="default-pic">
                <div class="mail-icon-section" onclick="chatBox()">
                  <i class="fa-solid fa-bell fa-3x"></i>
                  <i class="circle-icon fa-solid fa-circle"></i>
                </div>
              </div>



            </div>




          </nav>
          <div class="hidden-sidebar">
            <div class="sidebar-section-container">
              <input class="checkbox-section" type="checkbox" name="isRememberStatus" value=""> Remember Me
            </div>

            <a href="../LT-user/LT-user-profile.html" target="_self">
              <div class="sidebar-section-container">
                <i class="icon-section fa-solid fa-user"></i> Profile
              </div>
            </a>

            <a href="../search-user/search-results-LT.html" target="_self">
              <div class="sidebar-section-container">
                <i class="icon-section fa-solid fa-users"></i> Browse Users
              </div>
            </a>


            <a href="../reserve-user/reserve-user-search-lab-LT.html" target="_self">
              <div class="sidebar-section-container">
                <i class="icon-section fa-solid fa-laptop"></i> Browse Labs
              </div>
            </a>


            <a href="../report-form/report-form-LT.html" target="_self">
              <div class="sidebar-section-container">
                <i class="icon-section fa-solid fa-flag"></i> Report a Problem
              </div>
            </a>

            <a class="no-decor" href="../../index.html" target="_self">
              <div class="sidebar-section-container no-decor" >
                <i class="icon-section fa-solid fa-right-from-bracket"></i> Logout
              </div>
            </a>


          </div>

          <div id="chatbox" onclick="playMusic()">
            <div id="chatlist">
              <h1 class="d-flex justify-content-center">Reports</h1>
              <div class="chatbox-container" onclick="changeTab('chatlist','direct-message')">
                <div class="chatbox-profilePic">
                  <img src="https://static.wikia.nocookie.net/vgost/images/5/56/Rick_Astley.jpg/revision/latest?cb=20220705002743" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Rick Astley
                  </div>
                  <div class="chatbox-chat">
                    Never Gonna Give You Up...
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://miro.medium.com/v2/resize:fit:698/1*0jjdu52m0MO4SjLWiCVOlg.jpeg" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Hatsune Miku
                  </div>
                  <div class="chatbox-chat">
                    ミクだよ！ミクだよ！ミ...
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://i.pinimg.com/736x/d3/33/28/d3332868c128f24285865d56db9dadc7.jpg" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Silverwolf
                  </div>
                  <div class="chatbox-chat">
                    POT 6 LEE, NOT EVEN Mł...
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://media.discordapp.net/attachments/1077880234554167357/1206829856860536882/Chain.png?ex=65dd6ee3&is=65caf9e3&hm=8673ec6729bb00b818251fa81f9764c19e177693d6f3e2ade7c0aba774a97c05&=&format=webp&quality=lossless&width=658&height=676" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Joaquin Miguel Sinjian
                  </div>
                  <div class="chatbox-chat">
                    Bro, STADVDB needs CSMO...
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://pbs.twimg.com/media/FtHR_xEXoAQS1Hl?format=jpg&name=large" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Majima Gorou
                  </div>
                  <div class="chatbox-chat">
                    桐生ーちゃんわどこ？！！
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://media.tenor.com/EzdIBaQtr0YAAAAM/fnaf-superidol-epic-gaming.gif" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    De Xian Rong
                  </div>
                  <div class="chatbox-chat">
                    Super idol 的笑容都没...
                  </div>
                </div>
              </div>

              <div class="chatbox-container">
                <div class="chatbox-profilePic">
                  <img src="https://media.discordapp.net/attachments/1077880234554167357/1206834071075037224/image.png?ex=65dd72d0&is=65cafdd0&hm=57241974c0a3ede7a8939d3d51d84aa32e32dbe25ec5d008a53a1788581cf070&=&format=webp&quality=lossless" class="profile-pic">
                </div>
                <div class="chatbox-chatContainer">
                  <div class="chatbox-chatname">
                    Enzo Arkin Panugayan
                  </div>
                  <div class="chatbox-chat">
                    KITCHEN GUN? I BOUGH...
                  </div>
                </div>
              </div>
            </div>

            <div id="direct-message">
              <div class="direct-message-header">
                  <div class="direct-message-header-pic">
                    <img src="https://static.wikia.nocookie.net/vgost/images/5/56/Rick_Astley.jpg/revision/latest?cb=20220705002743" class="direct-message-item">
                  </div>
                  <div class="direct-message-header-name">
                    Rick Astley
                  </div>
                  <div class="direct-message-header-exit" onclick="changeTab('direct-message','chatlist')">
                    <img src="https://banner2.cleanpng.com/20180426/bae/kisspng-x-mark-computer-icons-check-mark-clip-art-5ae1aac8182a71.821442211524738760099.jpg" class="direct-message-item">
                  </div>
              </div>
              <div class="direct-message-body">
                  <div class="direct-message-recieve">
                    <div class="direct-message-body-pic">
                      <img src="https://static.wikia.nocookie.net/vgost/images/5/56/Rick_Astley.jpg/revision/latest?cb=20220705002743" class="direct-message-item">
                    </div>
                    <div class="direct-message-body-message">
                      Never Gonna Give You Up
                    </div>

                  </div>
              </div>
              <div class="direct-message-footer">
                  <input type="type">
              </div>
            </div>

            <audio id="audio" src="../../css/audio/musicChat.mp3" style="display: flex"></audio>
          </div>
          <script src="../../js/chatbox.js"></script>

  <section class="lab-slots-browse-section-2">
    <div class="starting-section-top-text">
      <h1>Room: <span><strong>GK302</strong></span></h1>
      <h2>Select a Date: </h2>
    </div>

    <div id="weekdaysChoices" class="reservation-next-days">

      <div class="day-container" id="daysContainer">

      </div>

    </div>


    <div id="selectSeatsSection" class="selected-seat-section flex-column">
      <button class="selected-seat-button" type="button" name="button" onclick="openModal()">Select a Seat</button>
      <p class="selected-seat-text-section">Selected seat: <strong> <span id="seatNum" class="selected-seat-text">N/A</span> </strong></p>
      <p class="is-anonymous-section">set Anonymous? &nbsp;<input type="checkbox" name="isAnon" value=""> </p>
    </div>

    <div id="timeTableSection" class="time-table-section">
      <!-- Morning Time Slot Table -->
      <table id="morningTable" class="time-table">
        <thead>
          <tr>
            <th class="time-slot-column">Time Slot</th>
            <th class="reserve-check-column">Reserve</th>
            <th class="seat-booked-column">Seat No.</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>

      <!-- Afternoon Time Slot Table -->
      <table id="afternoonTable" class="time-table">
        <thead>
          <tr>
            <th class="time-slot-column">Time Slot</th>
            <th class="reserve-check-column">Reserve</th>
            <th class="seat-booked-column">Seat No.</th>
          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>

    </div>

    <footer>

      <button class="confirm-reservation-btn custom-button-2" data-toggle="modal" data-target="#confirmationModal">Confirm Reservations</button>



      <a href="LT-user-reserve-student.html" target="_self">
        <button class="cancel-btn arrow-button">Cancel</button>
      </a>

    </footer>
  </section>

  <div id="modalSeats" class="seat-modal">
    <button type="button" class="btn btn-danger close-btns" onclick="closeModal()">X</button>

    <section id="room-container" class="room-container">
      <div class="d-flex align-items-center">
        <div class="whiteboard-section">
          <p><strong>Whiteboard/ PPT</strong></p>
        </div>


        <div class="container">
          <!-- Top Half -->
          <div class="row">
            <div class="box no-margin-top">
              <div class="seat-box no-margin-top">
                1
              </div>
              <div class="seat-box">
                2
              </div>
              <div class="seat-box">
                3
              </div>
              <div class="seat-box">
                4
              </div>


            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                9
              </div>
              <div class="seat-box">
                10
              </div>
              <div class="seat-box">
                11
              </div>
              <div class="seat-box">
                12
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                17
              </div>
              <div class="seat-box">
                18
              </div>
              <div class="seat-box">
                19
              </div>
              <div class="seat-box">
                20
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                25
              </div>
              <div class="seat-box">
                26
              </div>
              <div class="seat-box">
                27
              </div>
              <div class="seat-box">
                28
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                33
              </div>
              <div class="seat-box">
                34
              </div>
              <div class="seat-box">
                35
              </div>
              <div class="seat-box">
                36
              </div>

            </div>
          </div>
          <!-- Bottom Half -->
          <div class="row">
            <div class="box">
              <div class="seat-box no-margin-top">
                5
              </div>
              <div class="seat-box ">
                6
              </div>
              <div class="seat-box">
                7
              </div>
              <div class="seat-box">
                8
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                13
              </div>
              <div class="seat-box">
                14
              </div>
              <div class="seat-box">
                15
              </div>
              <div class="seat-box">
                16
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                21
              </div>
              <div class="seat-box">
                22
              </div>
              <div class="seat-box">
                23
              </div>
              <div class="seat-box">
                24
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                29
              </div>
              <div class="seat-box">
                30
              </div>
              <div class="seat-box">
                31
              </div>
              <div class="seat-box">
                32
              </div>

            </div>
            <div class="box">
              <div class="seat-box no-margin-top">
                37
              </div>
              <div class="seat-box">
                38
              </div>
              <div class="seat-box">
                39
              </div>
              <div class="seat-box">
                40
              </div>

            </div>
          </div>

        </div>
      </div>


    </section>
  </div>



  <div class="confirmed-reservations-message">

  </div>

  <div id="overlay" class="overlay" onclick="closeModal()"></div>


    <div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Confirm Reservation</h5>
                    <button type="button" class="close btn-danger" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>


                <div class="modal-body">
                    Are you sure you want to confirm the following informaiton:<br>
                     <strong>Room: GK302</strong>
                    <table>
                      <thead>
                        <th class="tc">Time slot</th>
                        <th class="tc">Seat number</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="tc">
                            7:30-8:00 A.M.
                          </td>
                          <td class="tc">
                            22
                          </td>
                        </tr>

                        <tr>
                          <td class="tc">
                            8:30-9:00 A.M.
                          </td>
                          <td class="tc">
                            17
                          </td>
                        </tr>

                        <tr>
                          <td class="tc">
                            12:30-1:00 P.M.
                          </td>
                          <td class="tc">
                            15
                          </td>
                        </tr>


                        <tr>
                          <td class="tc">
                            1:30-2:00 P.M.
                          </td>
                          <td class="tc">
                            31
                          </td>
                        </tr>


                        <tr>
                          <td class="tc">
                            7:30-8:00 A.M.
                          </td>
                          <td class="tc">
                            22
                          </td>
                        </tr>
                      </tbody>

                    </table>
                </div>
                <div class="modal-footer d-flex justify-content-center">

                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                    <a href="LT-user-reserve-student.html">
                      <button type="button" class="btn btn-primary" onclick="confirmReservation()">Confirm</button>
                    </a>

                </div>
            </div>
        </div>
    </div>




  <!--Script section -->
  <script src="https://kit.fontawesome.com/d9289310f5.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


</body>
  <script>
    $(document).ready(function () {
      $("#toggleSidebar").on("click", function () {
        $(".hidden-sidebar").toggleClass("show");
      });
    });

    function showSelectSeat() {

      document.getElementById('selectSeatsSection').style.display = 'flex';

    }
    function showTimeTable() {

      document.getElementById('timeTableSection').style.display = 'flex';
      document.querySelector('footer').style.display = 'block';
      document.querySelector('footer').style.justifyContent = 'center';


    }

    function copySelected(seatBox) {
      var sourceText = seatBox.innerText;
      document.querySelector('.selected-seat-text').innerText = sourceText;
    }

    function copySelectedToCheck(checkboxElement, tableCell) {

      var sourceText = document.querySelector('.selected-seat-text').innerText
      if (checkboxElement.checked && sourceText != 'N/A') {
        document.querySelector(tableCell).innerText = sourceText;
      } else {
        document.querySelector('.${tableCell}').innerText = 'X';
      }


    }


    function openModal() {
      document.getElementById('modalSeats').style.display = 'flex';
      document.getElementById('overlay').style.display = 'block';
      document.getElementById('room-container').style.display = 'flex';
    }

    function closeModal() {
      document.getElementById('modalSeats').style.display = 'none';
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('room-container').style.display = 'none';
    }




    document.addEventListener("DOMContentLoaded", function() {

      // Get all seat-box elements
      var seatBoxes = document.querySelectorAll('.seat-box');

      // Add function to send seat number selected
      seatBoxes.forEach(function(seatBox) {
        seatBox.addEventListener('click', function() {
          copySelected(seatBox);
          closeModal();
          showTimeTable();
        });
      });

      function generateTimeSlotTable(tableId, timeName, startTime, endTime) {
        const table = document.getElementById(tableId).querySelector('tbody');
        var data_count = 0;
        var row;

        for (let minutes = startTime * 60; minutes < endTime * 60; minutes += 30) {
          const hourStart = Math.floor(minutes / 60);
          const minuteStart = minutes % 60;
          const hourEnd = Math.floor((minutes + 30) / 60);
          const minuteEnd = (minutes + 30) % 60;


          const timeSlot = `${hourStart}:${minuteStart === 0 ? '00' : minuteStart} - ${hourEnd}:${minuteEnd === 0 ? '00' : minuteEnd}`;

          // Hardcoded time slot block
          if (data_count == 6 && timeName == "morning") {
            row = `<tr>
                              <td class="time-slot-data ${timeName}-time-slot-${data_count}">${timeSlot}</td>
                              <td class="checkbox-data ${timeName}-checkbox-slot-${data_count}" >X</td>
                              <td class="seat-num-data ${timeName}-seat-slot-${data_count}">X</td>

                           </tr>`;
          }

          else if (data_count == 8 && timeName == "morning") {
            row = `        <tr>
                              <td class="time-slot-data ${timeName}-time-slot-${data_count}">${timeSlot}</td>
                              <td class="checkbox-data ${timeName}-checkbox-slot-${data_count}" >
                                <a class="taken-slot-text " data-toggle="tooltip" data-placement="top" title="Taken by ID 12206660" href="../profile/profile-other-user.html">
                                  <u>TAKEN</u>
                                </a>
                              </td>
                              <td class="seat-num-data ${timeName}-seat-slot-${data_count}">24</td>

                           </tr>`;
          }

          else if (data_count == 4 && timeName == "afternoon") {
            row = `        <tr>
                              <td class="time-slot-data ${timeName}-time-slot-${data_count}">${timeSlot}</td>
                              <td class="checkbox-data ${timeName}-checkbox-slot-${data_count}" >
                                <div class="taken-slot-text" data-toggle="tooltip" data-placement="top" title="Taken by ID ???">
                                  <u>TAKEN</u>
                                </div>
                              </td>
                              <td class="seat-num-data ${timeName}-seat-slot-${data_count}">25</td>

                           </tr>`;
          }
          else {
            row = `<tr>
                              <td class="time-slot-data ${timeName}-time-slot-${data_count}">${timeSlot}</td>
                              <td class="checkbox-data ${timeName}-checkbox-slot-${data_count}" ><input onclick='copySelectedToCheck(this, ".${timeName}-seat-slot-${data_count}")' type="checkbox"></td>
                              <td class="seat-num-data ${timeName}-seat-slot-${data_count}">X</td>
                           </tr>`;
          }

          data_count += 1;


          table.innerHTML += row;
        }
      }

      generateTimeSlotTable("morningTable", "morning", 7, 12);


      generateTimeSlotTable("afternoonTable", "afternoon", 12, 17);
    });



    //7 Day week generator
    const currentDate = new Date();

    const daysContainer = document.getElementById("daysContainer");
    let selectedDayDiv = null;
    for (let i = 0; i < 8; i++) {
      const day = new Date();




      day.setDate(currentDate.getDate() + i);

      const options = {
        weekday: 'short',
        month: 'short',
        day: 'numeric'
      };
      const formattedDate = day.toLocaleDateString('en-US', options);

      const dayDiv = document.createElement("div");
      dayDiv.className = "day";


      const formattedDateElement = document.createElement("div");
      formattedDateElement.className = "format-date";
      formattedDateElement.textContent = formattedDate;

      dayDiv.appendChild(formattedDateElement);


      dayDiv.addEventListener("click", () => {

        if (selectedDayDiv) {
          selectedDayDiv.style.backgroundColor = "white";
        }
        showSelectSeat();


        dayDiv.style.backgroundColor = "#ADBC9F";

        selectedDayDiv = dayDiv;
      });

      daysContainer.appendChild(dayDiv);
    }
  </script>

</html>
